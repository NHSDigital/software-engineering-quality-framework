# Engineering quality-checks

This is part of a broader [quality framework](README.md) and forms a key part of the [metrics](metrics.md) section.

## Summary

Quality checks are at the heart of good engineering, and are essential for rapid and safe delivery of software changes. This page provides an index of the various quality checks described within our principles, patterns and practices.

The checks are classified here based on the concerns they help to address:

* Functionality
* Security
* Resilience
* Maintainability

## Usage

All applicable quality checks should be applied. Not all checks are applicable in all contexts, for example accessibility testing is only applicable to applications with a user interface.

The majority of these checks should be [automated](./patterns/automate-everything.md) via [continuous integration / continuous deployment](./practices/continuous-integration.md): the optimal sequencing of these checks within CI/CD pipelines will depend on the project's branching strategy, deployment strategy, etc.

All of these checks are important, even where their purpose overlaps with other checks in the list. For example, comprehensive functional testing could be achieved without unit testing, instead only using the other functional test types on this list - this would result in a very long-running and inefficient test suite, precluding fast feedback and impeding rapid and safe delivery of software changes. For further details please see [test practices](./practices/testing.md), and especially the [test pyramid](https://martinfowler.com/articles/practical-test-pyramid.html).

## RAG scale

We rate our applications against each of these checks as follows:

* Green = the quality check is applied frequently and consistently (in practice this typically means [automated](./patterns/automate-everything.md) via [continuous integration / continuous deployment](./practices/continuous-integration.md)), the output of the check is a quality gate (as opposed to just a warning / for information), and the tolerances for that quality gate (e.g. code coverage %) are agreed and understood
* Amber = the quality check is applied, but not all conditions for green are met - for example the check generates warnings that may or may not be acted on
* Red = the quality check is not applied
* N/A = the quality check is not applicable

## Details

| Quality check          | Classification  | Applicability | What it means                                                                                                                                                                                                   | Why we care                                                                                                                                                                                                                                                | Tolerances for green                                                                                                                                                     | Endorsed tools / configuration                                                | Further details                                                                                               |
| :--------------------- | :-------------- | :------------ | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------ |
| Unit tests             | Functionality   | Universal     | Logic tests for individual blocks of code, e.g. individual methods                                                                                                                                              | This is the quickest (to execute) type of functional test, so these are essential to achieve both rapid and thorough functional testing                                                                                                                    | Builds fail if any tests fail                                                                                                                                            | -                                                                             | [Test practices](./practices/testing.md)                                                                      |
| Integration tests      | Functionality   | Universal     | Check interactions with other components and dependant systems. e.g. across microservices, authentication layers, database, third-party systems. Ideally includes full end-to-end testing across all components | When components are developed in isolation, it's vital that we regularly test them working together. Changes in one component can break the whole system                                                                                                   | Builds fail if any tests fail                                                                                                                                            |                                                                               |                                                                                                               |
| API / contract tests   | Functionality   | Contextual    | Check whether the API interface adheres to the agreed contract                                                                                                                                                  | Any API interface is an integration point with another component or a software systems. An extra care has to be taken to ensure compatibility and stability of that integration are maintained so that we don't break applications that depend on our APIs | Builds fail if any tests fail                                                                                                                                            | Postman                                                                       | [Automate Your API Tests with Postman](https://www.postman.com/use-cases/api-testing-automation/)             |
| UI tests               | Functionality   | Contextual    |                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                            | Builds fail if any tests fail                                                                                                                                            |                                                                               |                                                                                                               |
| Secret scanning        | Security        | Universal     | Check for secrets (e.g. passwords, IP addresses, etc) accidentally included in software code                                                                                                                    | This protects us against accidentally leaking secrets (in source code) which could compromise the security of the application                                                                                                                              | Builds fail if any of these patterns (with some exceptions) are found: IPv4/IPv6 address, domain name, AWS account number, password/token/key, high entropy e.g. SSH key | Git pre-commit hook, TBC                                                      | TBC                                                                                                           |
| Security code analysis | Security        | Universal     | Check for indications of possible security issues (for example injection weaknesses)                                                                                                                            | This gives fast feedback about security issues: it's not as thorough as security testing, but it's much quicker to execute, so both are important to achieve both rapid and thorough security testing                                                      |                                                                                                                                                                          |                                                                               |                                                                                                               |
| Security testing       | Security        | Contextual    | Check for security issues (for example injection weaknesses)                                                                                                                                                    | More thorough than security code scanning, but much slower to execute, so both are important to achieve both rapid and thorough security testing                                                                                                           |                                                                                                                                                                          |                                                                               |                                                                                                               |
| Dependency scanning    | Security        | Universal     |                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                            |                                                                                                                                                                          |                                                                               |                                                                                                               |
| Performance tests      | Resilience      | Contextual    | Check whether application performance is acceptable at different levels of load                                                                                                                                 | Without this test, we don't know how load will affect the performance of the application                                                                                                                                                                   |                                                                                                                                                                          |                                                                               |                                                                                                               |
| Capacity tests         | Resilience      | Contextual    | Identify the application's breaking point in terms of heavy load                                                                                                                                                | Without this test, we don't know how much load the application can handle before the application breaks                                                                                                                                                    |                                                                                                                                                                          |                                                                               |                                                                                                               |
| Stress tests           | Resilience      | Contextual    | Check whether sudden spikes in load cause a problem                                                                                                                                                             | Without this test, we don't know if the application will fail under a sharp increase in load                                                                                                                                                               |                                                                                                                                                                          |                                                                               |                                                                                                               |
| Soak tests             | Resilience      | Contextual    | Check whether sustained heavy load causes a problem                                                                                                                                                             | Without this test, we don't know if application performance will suffer under prolonged heavy load                                                                                                                                                         |                                                                                                                                                                          |                                                                               |                                                                                                               |
| Chaos tests            | Resilience      | Contextual    |                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                            |                                                                                                                                                                          |                                                                               |                                                                                                               |
| Code coverage          | Maintainability | Universal     | The proportion of the application code which is executed (in this context: during testing)                                                                                                                      | The higher the code coverage, the more thorough the testing, and therefore the higher the likelihood of detecting functional issues early                                                                                                                  | For new code: 70%                                                                                                                                                        |                                                                               |                                                                                                               |
| Duplicate code scan    | Maintainability | Universal     |                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                            |                                                                                                                                                                          |                                                                               |                                                                                                               |
| Code smells scan       | Maintainability | Universal     | Check whether the software code adheres to the principles, patterns and practices of writing clean code                                                                                                         | The code is written once but read and executed many times. If the code is not clean, the cost and risk of making software changes both increase exponentially over time                                                                                    |                                                                                                                                                                          | [SonarQube](https://www.sonarqube.org/), [SonarCloud](https://sonarcloud.io/) | [Clean Code: Smells and Heuristics](https://moderatemisbehaviour.github.io/clean-code-smells-and-heuristics/) |
| Dead code scan         | Maintainability | Universal     |                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                            |                                                                                                                                                                          |                                                                               |                                                                                                               |
| Code review            | Other           | Universal     | A second person manually checking a code change                                                                                                                                                                 | Quality check by a human, as opposed to via a tool                                                                                                                                                                                                         | Enforced & audited step within workflow                                                                                                                                  | TBC                                                                           | [Code review guidance](./patterns/everything-as-code.md#code-review)                                          |
| Accessibility tests    | Other           | Universal     |                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                            |                                                                                                                                                                          |                                                                               |                                                                                                               |
| Tech radar check       | Other           | Universal     |                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                            |                                                                                                                                                                          |                                                                               |                                                                                                               |
